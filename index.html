<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DDR4 Price Chart</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0f1117; color: #e1e4e8; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 2rem 1rem; }
  h1 { font-size: 1.4rem; font-weight: 600; margin-bottom: 0.3rem; }
  .sub { color: #8b949e; font-size: 0.85rem; margin-bottom: 1.5rem; }
  .chart-wrap { width: 100%; max-width: 960px; background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 1.5rem; }
  canvas { width: 100% !important; }
  #status { color: #8b949e; font-size: 0.8rem; margin-top: 1rem; }
</style>
</head>
<body>
<h1>DDR4 16Gb (2Gx8) 3200 — Price Chart</h1>
<p class="sub">Session High / Low / Average (USD)</p>
<div class="chart-wrap"><canvas id="chart"></canvas></div>
<p id="status">Loading data…</p>
<script>
(async () => {
  const url = 'https://raw.githubusercontent.com/titled-agent-001/ddr4-pricing-log/main/ddr4-pricing.json';
  try {
    const res = await fetch(url);
    const raw = await res.json();
    const data = Array.isArray(raw) ? raw : raw.logs;
    const labels = data.map(d => d.date);
    const mk = (field, label, color) => ({ label, data: data.map(d => d[field]), borderColor: color, backgroundColor: color + '18', borderWidth: 2, pointRadius: 0, tension: 0.3, fill: false });
    new Chart(document.getElementById('chart'), {
      type: 'line',
      data: { labels, datasets: [
        mk('session_high', 'Session High', '#f97583'),
        mk('session_low', 'Session Low', '#79c0ff'),
        mk('session_average', 'Session Avg', '#56d364'),
      ]},
      options: {
        responsive: true,
        interaction: { mode: 'index', intersect: false },
        plugins: { legend: { labels: { color: '#e1e4e8', usePointStyle: true, pointStyle: 'line' } }, tooltip: { backgroundColor: '#1c2128', titleColor: '#e1e4e8', bodyColor: '#e1e4e8', borderColor: '#30363d', borderWidth: 1 } },
        scales: {
          x: { ticks: { color: '#8b949e', maxTicksLimit: 12 }, grid: { color: '#21262d' } },
          y: { ticks: { color: '#8b949e' }, grid: { color: '#21262d' } }
        }
      }
    });
    document.getElementById('status').textContent = `${data.length} data points loaded`;
  } catch (e) { document.getElementById('status').textContent = 'Failed to load data: ' + e.message; }
})();
</script>
</body>
</html>
